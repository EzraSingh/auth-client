(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t,n){e.exports=n(69)},67:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(29),i=n.n(o),c=n(72),l=n(4),u=n(74),s=n(70),m=n(6),p=n(73),f=Object(l.b)(function(e){return Object(m.a)({},e.auth)})(function(e){var t=e.isLoggedIn,n=e.children;return t?n:r.a.createElement(p.a,{exact:!0,to:"/"})}),d=function(e){return function(t){return r.a.createElement(f,null,r.a.createElement(e,t))}},h=n(8),E=n(9),g=n(11),v=n(10),b=n(12),O=n(71);var w=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(g.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).renderAvatar=function(){return r.a.createElement("figure",{className:"avatar animated rotateIn delay-2"},r.a.createElement(O.a,{to:"/profile"},r.a.createElement("img",{src:n.props.avatar||"https://pngimage.net/wp-content/uploads/2018/05/default-user-profile-image-png-6.png",alt:n.props.name})))},n}return Object(b.a)(t,e),Object(E.a)(t,[{key:"generateRoutes",value:function(){return this.props.isLoggedIn?t.routes.filter(function(e){return e.auth&&!e.hideOnAuth}):t.routes.filter(function(e){return!e.auth})}},{key:"render",value:function(){return r.a.createElement("nav",{className:"flex navbar animated slideInDown"},this.generateRoutes().map(function(e){return r.a.createElement(O.a,{className:"button button-outline",to:e.href,key:e.href},e.name)}),this.props.isLoggedIn&&this.renderAvatar())}}]),t}(a.Component);w.routes=[new function(e,t,n,a){this.name=e,this.href=t,this.auth=n,this.hideOnAuth=a}("Logout","/logout",!0)];var y=Object(l.b)(function(e){return Object(m.a)({},e.auth,{avatar:e.user.profile.avatar,name:e.user.profile.name})})(w),j=function(){return r.a.createElement("em",null,"Loading...")},I=n(31),L=function(e){var t=e.email,n=e.profile,a=n.avatar||"https://pngimage.net/wp-content/uploads/2018/05/default-user-profile-image-png-6.png";return r.a.createElement("article",{className:"flex card box v-center"},r.a.createElement("div",{className:"avatar"},r.a.createElement("figure",{className:"animated rotateIn delay-2"},r.a.createElement("img",{src:a,alt:"avatar"}))),r.a.createElement("div",{className:"flex container animated fadeIn delay-3"},r.a.createElement("span",{className:"fluid"},r.a.createElement("h1",null,n.name),r.a.createElement("h2",null,t)),r.a.createElement("div",{className:"flex options"},r.a.createElement(I.a,{className:"button",to:"/profile/update"},"Update Profile"))))},N=n(32),R=n.n(N).a.create({baseURL:"http://127.0.0.1:5000/api",headers:{"Access-Control-Allow-Origin":"*",Authorization:null}});R.interceptors.request.use(function(e){return e.headers.Authorization=sessionStorage.getItem("token"),e},function(e){return Promise.reject(e)});var A=R,S=function(e){function t(){return Object(h.a)(this,t),Object(g.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(E.a)(t,[{key:"componentWillMount",value:function(){this.props.loadProfile()}},{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.email,a=e.profile;return t?r.a.createElement(j,null):r.a.createElement(L,{email:n,profile:a})}}]),t}(a.Component),k=Object(l.b)(function(e){return Object(m.a)({},e.user,{isLoading:!e.user.email})},function(e){return{loadProfile:function(){return e(function(e){e({type:"FETCHING_PROFILE"}),A.get("/user").then(function(t){var n=t.data,a=n.email,r=n.profile;e({type:"USER_PROFILE",user:{email:a,profile:r}})}).catch(function(t){e({type:"LOGIN_REQUIRED"})})})}}})(S),P=function(){return r.a.createElement("div",{className:"profile overlay"},r.a.createElement(y,null),r.a.createElement("div",{id:"card-container",className:"flex v-center h-center"},r.a.createElement(k,null)))},U=n(33),x=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(g.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={redirect:!1},n.handleSubmit=function(e){e.preventDefault();var t=new FormData(e.target);n.props.update({name:t.get("name")})},n}return Object(b.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props.profile;return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{id:"name",name:"name",placeholder:!Object(U.isEmpty)(e)&&"name"in e&&e.name}),r.a.createElement("input",{type:"submit",value:"Save"}))}}]),t}(a.Component),F=Object(l.b)(function(e){return{profile:e.user.profile}},function(e){return{update:function(t){return e(function(e){var t=e.name;return function(e){e({type:"UPDATING_PROFILE"}),A.put("/user",{name:t}).then(function(n){var a=n.data.message;e({type:"PROFILE_UPDATED",message:a,profile:{name:t}})}).catch(function(t){e({type:"LOGIN_REQUIRED"})})}}(t))}}})(x),T=function(e){return function(t){return r.a.createElement(a.Fragment,null,r.a.createElement(y,null),r.a.createElement(e,t))}}(function(){return r.a.createElement("div",{className:"flex update-profile overlay v-center h-center"},r.a.createElement("div",{className:"flex box animated fadeInUp"},r.a.createElement("h2",null,"Update Profile"),r.a.createElement(F,null)))}),D=0,_=(setInterval(function(){D=0},1e4),function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(g.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={show:!1},n.handleSubmit=function(e){e.preventDefault();var t=new FormData(e.target);n.props.login({email:t.get("email"),password:t.get("password")})},n.toggleVisibility=function(){n.setState({show:!n.state.show})},n}return Object(b.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return this.props.isLoggedIn?r.a.createElement(p.a,{to:"/profile"}):r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{id:"email",name:"email",type:"email",required:!0}),r.a.createElement("label",{htmlFor:"password"},"Password",r.a.createElement("i",{className:this.state.show?"fas fa-eye":"fas fa-eye-slash",onClick:this.toggleVisibility})),r.a.createElement("input",{id:"password",name:"password",type:this.state.show?"text":"password",required:!0}),r.a.createElement("br",null),r.a.createElement("input",{className:"button button-outline",type:"submit",value:"Login"}))}}]),t}(a.Component)),C=Object(l.b)(function(e){return Object(m.a)({},e.auth)},function(e){return{login:function(t){return e(function(e){var t=e.email,n=e.password;return D++,function(e){D>"5"?e({type:"LOGIN_TIMEOUT"}):(e({type:"LOGIN_ATTEMPT"}),A.post("/authenticate",{email:t,password:n}).then(function(t){if(200===t.status){var n=t.data.token;D=0,e({type:"LOGIN",token:n})}}).catch(function(t){e({type:"LOGIN_FAILURE"})}))}}(t))}}})(_),G=function(){return r.a.createElement("div",{className:"login overlay flex h-center v-center"},r.a.createElement("div",{className:"form box animated fadeInUp"},r.a.createElement("h2",null,"Login"),r.a.createElement(C,null),r.a.createElement(I.a,{to:"/register"},"Don't have an account?")))},W=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(g.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault();var t=new FormData(e.target);n.props.register({email:t.get("email"),password:t.get("password"),confirm:t.get("confirm")})},n}return Object(b.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return this.props.redirect?r.a.createElement(p.a,{exact:!0,to:"/"}):r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",{htmlFor:"email"},"Email:"),r.a.createElement("input",{name:"email",id:"email",type:"email",required:!0}),r.a.createElement("label",{htmlFor:"password"},"Password:"),r.a.createElement("input",{name:"password",id:"password",type:"password",required:!0}),r.a.createElement("label",{htmlFor:"confirm"},"Confirm Password:"),r.a.createElement("input",{name:"confirm",id:"confirm",type:"password",required:!0}),r.a.createElement("input",{type:"submit",value:"Create Account"}))}}]),t}(a.Component),q=Object(l.b)(function(e){return{redirect:!1===e.user.email}},function(e){return{register:function(t){return e(function(e){var t=e.email,n=e.password,a=e.confirm;return function(e){n!==a?e({type:"PASSWORD_CONFIRMATION_FAILED"}):(e({type:"REGISTERING_USER"}),A.post("/user",{email:t,password:n,confirm:a}).then(function(t){var n=t.data.message;200===t.status&&e({type:"USER_CREATED",message:n})}).catch(function(t){var n=t.response.data.message;e({type:"REGISTRATION_FAILED",message:n})}))}}(t))}}})(W),M=function(){return r.a.createElement("div",{className:"register overlay flex h-center v-center"},r.a.createElement("div",{className:"form box animated fadeInUp"},r.a.createElement("h2",null,"Register"),r.a.createElement(q,null),r.a.createElement(I.a,{to:"/"},"Already have an account?")))},z=function(e){function t(){return Object(h.a)(this,t),Object(g.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(E.a)(t,[{key:"componentWillMount",value:function(){this.props.logout()}},{key:"render",value:function(){return this.props.isLoggedIn?r.a.createElement("em",null,"Logging out..."):r.a.createElement(p.a,{exact:!0,to:"/"})}}]),t}(a.Component),B=Object(l.b)(function(e){return Object(m.a)({},e.auth)},function(e){return{logout:function(){return e(function(e){e({type:"LOGOUT"}),e({type:"RESET_APP"})})}}})(z),J=function(){return r.a.createElement(u.a,null,r.a.createElement(s.a,{exact:!0,path:"/",component:G}),r.a.createElement(s.a,{path:"/register",component:M}),r.a.createElement(s.a,{exact:!0,path:"/profile",component:d(P)}),r.a.createElement(s.a,{path:"/profile/update",component:d(T)}),r.a.createElement(s.a,{path:"/logout",component:d(B)}))},Q=n(14),V=(n(66),n(34)),H=n(35),$=n.n(H),K={isLoggedIn:!!sessionStorage.getItem("token")},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return sessionStorage.setItem("token",t.token),{isLoggedIn:!0};case"LOGOUT":return sessionStorage.removeItem("token"),{isLoggedIn:!1};default:return e}},Y={email:null,profile:{}},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_CREATED":return Object(m.a)({},e,{email:!1});case"USER_PROFILE":return Object(m.a)({},t.user);case"PROFILE_UPDATED":return Object(m.a)({},e,{profile:t.profile});default:return e}},ee={auth:K,user:Y},te=Object(Q.combineReducers)({auth:X,user:Z}),ne=function(e,t){return"RESET_APP"===t.type&&(e=ee),te(e,t)},ae=Object(Q.applyMiddleware)(V.a,$.a),re=Object(Q.createStore)(ne,ee,ae),oe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ie(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}n(67);var ce=r.a.createElement(c.a,null,r.a.createElement(l.a,{store:re},r.a.createElement(J,null)));i.a.render(ce,document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");oe?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ie(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):ie(t,e)})}}()}},[[36,2,1]]]);
//# sourceMappingURL=main.c2cd9855.chunk.js.map